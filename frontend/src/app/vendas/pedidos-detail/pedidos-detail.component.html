<div class="container">
    <mat-form-field appearance="fill" floatLabel="always">
        <mat-label>Valor</mat-label>
        <input matInput [(ngModel)]="pedido.valor" disabled>
    </mat-form-field>
    <br>
    <mat-form-field appearance="fill" floatLabel="always">
        <mat-label>Vendedor</mat-label>
        <input matInput [(ngModel)]="pedido.vendedor_model.username" disabled>
    </mat-form-field>
    <br>
    <mat-form-field appearance="fill" floatLabel="always">
        <mat-label>Status</mat-label>
        <input matInput [(ngModel)]="pedido.status">
    </mat-form-field>
    <br>
    <mat-form-field appearance="fill" floatLabel="always">
        <mat-label>Forma de Pagamento</mat-label>
        <mat-select [(ngModel)]="pedido.forma_pagamento_model">
            <mat-option *ngFor="let f of formaPagamentos" [value]="f">
                {{f.descricao}}
            </mat-option>
        </mat-select>
    </mat-form-field>
    <br>


    <div  class="table-responsive">
        <table mat-table [dataSource]="produtos" class="mat-elevation-z8">
            <ng-container matColumnDef="qtd">
                <th mat-header-cell *matHeaderCellDef> Quantidade </th>
                <td mat-cell *matCellDef="let produto">
                    <mat-form-field class="qtd-class" appearance="fill" floatLabel="always">
                        <input matInput [(ngModel)]="produto.qtd" (ngModelChange)="addProduto(produto)">
                    </mat-form-field>
                    <br>
                </td>
            </ng-container>
            <ng-container matColumnDef="codigo">
                <th mat-header-cell *matHeaderCellDef> Código </th>
                <td mat-cell *matCellDef="let produto"> {{produto.codigo}} </td>
            </ng-container>
            <ng-container matColumnDef="nome">
                <th mat-header-cell *matHeaderCellDef> Nome </th>
                <td mat-cell *matCellDef="let produto"> {{produto.nome}} </td>
            </ng-container>
            <ng-container matColumnDef="valor">
                <th mat-header-cell *matHeaderCellDef> Valor Unitário</th>
                <td mat-cell *matCellDef="let produto">R$ {{produto.valor}} </td>
            </ng-container>
            <ng-container matColumnDef="parcial">
                <th mat-header-cell *matHeaderCellDef> Valor Parcial</th>
                <td mat-cell *matCellDef="let produto">R$ {{produto.valorParcial ? produto.valorParcial.toFixed(2) : 0}}
                </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
    </div>


    <button mat-raised-button color="accent" (click)="clickedButton()">{{isUpdate ? 'Atualizar' : 'Adicionar'}}</button>
    <button mat-raised-button (click)="back()">Voltar</button>
</div>